<mat-card>
  <mat-card-header>
    <img
      alt="Logo de l'asset considéré"
      mat-card-avatar
      style="object-fit: contain"
      [src]="call.image"
    />
    <mat-card-title>{{ call.name }}</mat-card-title>
    <mat-card-subtitle>{{ call.author }}</mat-card-subtitle>
  </mat-card-header>
  <mat-card-content class="flex flex-col">
    <p>${{ call.callPrice }} le {{ call.callDate | date }}</p>
    <mat-form-field appearance="fill">
      <mat-label>Prix clôture</mat-label>
      <input
        matInput
        [disabled]="!call.running"
        [(ngModel)]="call.closedPrice"
      />
    </mat-form-field>
    <mat-form-field appearance="fill">
      <mat-label>Date clôture</mat-label>
      <input
        matInput
        [disabled]="!call.running"
        [matDatepicker]="picker"
        [(ngModel)]="call.closedDate"
      />
      <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
      <mat-datepicker #picker></mat-datepicker>
    </mat-form-field>
  </mat-card-content>

  <mat-card-actions>
    <button
      mat-icon-button
      matTooltip="Supprimer le call"
      (click)="deleteCall(call.id)"
    >
      <mat-icon class="mr-4 cursor-pointer hover:text-red-600">delete</mat-icon>
    </button>
    <mat-slide-toggle
      color="primary"
      [checked]="!call.running"
      (change)="call.running = !call.running"
      >{{ call.running ? "Clôturer" : "En cours" }}</mat-slide-toggle
    >
    <button
      mat-raised-button
      matTooltip="Fournir un prix et une date de clôture pour valider"
      color="primary"
      [disabled]="isReadyToSave"
    >
      save
    </button>
  </mat-card-actions>
</mat-card>
